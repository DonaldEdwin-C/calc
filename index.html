<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fund Calculator</title>
</head>
<body>
  <h2>Investment Calculator</h2>

  <label for="fund">Select Fund:</label>
  <select id="fund">
    <option value="cmmf">CMMF</option>
    <option value="chyf">Cytonn High Yield Fund</option>
  </select>

  <br><br>

  <label for="amount">Amount (KES):</label>
  <input type="number" id="amount" />

  <br><br>

  <label for="months">Months:</label>
  <input type="number" id="months" />

  <br><br>

  <button id="calculate">Calculate</button>

  <h3>Results</h3>
  <pre id="output"></pre>

  <script type="module" src="/src/main.js"></script>
  <script>

    const baseUrl = "https://clients.cytonn.com";

    document.getElementById("calculate").addEventListener("click", async () => {
      const fundChoice = document.getElementById("fund").value;
      const amount = parseFloat(document.getElementById("amount").value);
      const months = parseInt(document.getElementById("months").value);

      let calculator;
      if (fundChoice === "cmmf") {
        calculator = new CMMFCalculator(baseUrl);
      } else {
        calculator = new CHYFCalculator(baseUrl);
      }

      await calculator.fetchRate();
      const result = calculator.calculate(amount, months);

      document.getElementById("output").textContent = JSON.stringify(result, null, 2);
    });
  </script>
</body>
</html>
